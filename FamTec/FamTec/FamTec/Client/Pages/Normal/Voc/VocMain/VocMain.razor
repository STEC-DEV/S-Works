@page "/voc"
@using FamTec.Client.Pages.Normal.Voc.VocMain.Components
@using FamTec.Shared.Client.DTO.Normal.Voc
@using FamTec.Shared.Server.DTO

<div class="voc-container yappear">
    <div class="condition-container">
        <SearchFilter 
            DefaultOption="@DefaultOption"
            MonthListData="@MonthVocData"
            OnDataChanged="OnDataChanged"
            OnMonthDataChanged="OnMonthDataChanged"
            OnSearchClicked="OnSearch"
            ListData="@VocData"
            />
    </div>
    @if (IsSearch)
    {
        <div class="content-container">
            <VocHIstory ListData="VocData" MonthListData="MonthVocData" DefaultOption=@DefaultOption />
        </div>
    }
</div>

@code {
    List<ListVocDTO> VocData = new List<ListVocDTO>();
    List<MonthVocListDTO> MonthVocData = new List<MonthVocListDTO>();
    int DefaultOption = 0;
    bool IsSearch = false;

    protected override async Task OnInitializedAsync()
    {

    }


    private async Task OnMonthDataChanged(List<MonthVocListDTO> data)
    {
        MonthVocData = data;
        StateHasChanged();
    }

    private async Task OnDataChanged(List<ListVocDTO> data)
    {
        VocData = data;
        StateHasChanged();
    }


    private async Task OnSearch()
    {
        IsSearch = true;
        StateHasChanged();
    }
}
